***************
*** 133,139 ****
      ClusterVersionEntity clusterVersionEntity = Mockito.mock(ClusterVersionEntity.class);
      Mockito.when(clusterVersionEntity.getState()).thenReturn(RepositoryVersionState.INSTALLED);
      Mockito.when(clusterVersionDAO.findByClusterAndStackAndVersion(
-         clusterName, targetStackId, repositoryVersion)).thenReturn(clusterVersionEntity);
      final List<String> hostNames = new ArrayList<>();
      hostNames.add("host1");
      hostNames.add("host2");
--- 134,140 ----
      ClusterVersionEntity clusterVersionEntity = Mockito.mock(ClusterVersionEntity.class);
      Mockito.when(clusterVersionEntity.getState()).thenReturn(RepositoryVersionState.INSTALLED);
      Mockito.when(clusterVersionDAO.findByClusterAndStackAndVersion(
+         clusterId, targetStackId, repositoryVersion)).thenReturn(clusterVersionEntity);
      final List<String> hostNames = new ArrayList<>();
      hostNames.add("host1");
      hostNames.add("host2");
